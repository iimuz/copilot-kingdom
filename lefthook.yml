pre-commit:
  jobs:
    - name: format
      skip:
        - rebase
        - merge
      group:
        parallel: true
        jobs:
          - name: prettier
            glob: "*.{json,jsonc,jsonl,md,toml,yml,yaml}"
            stage_fixed: true
            run: pnpm prettier --write {staged_files}
          - name: shfmt
            glob: "*.sh"
            stage_fixed: true
            run: shfmt -w -l {staged_files}
          - name: sort cspell file
            glob: "cspell.json"
            stage_fixed: true
            script: "sort_cspell.sh"
            runner: bash
    - name: lint
      skip:
        - rebase
        - merge
      group:
        parallel: true
        jobs:
          - name: prettier
            glob: "*.{json,jsonc,jsonl,md,toml,yml,yaml}"
            run: pnpm prettier --check {staged_files}
          - name: shellcheck
            glob: "*.sh"
            run: shellcheck {staged_files}
          - name: spell check
            run: pnpm cspell lint --no-must-find-files --no-progress {staged_files}
